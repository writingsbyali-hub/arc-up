---
import Layout from '~/layouts/PageLayout.astro';
import { Icon } from 'astro-icon/components';

const metadata = {
  title: 'Lab — Build & Test Plasma Systems',
};

const streams = [
  {
    id: 'physical',
    title: 'I. Physical Plasma Systems',
    status: 'Future Work',
    statusColor: 'red',
    accentColor: 'yellow-400',
    workDescription: 'Design and test plasma architectures that work reliably across contexts. Build modular components that can be 3D-printed, assembled safely, and replicated globally. Optimize circuits for efficiency and accessibility. Lead the development of plasma generation tools that communities can actually use.',
    backgrounds: 'Engineering, physics, electronics, hardware design, prototyping, materials science',
    projects: [
      { title: 'DBD Prototype v2', lookingFor: 'Hardware builders, CAD designers', status: 'Future Work' },
      { title: 'Circuit Optimization Library', lookingFor: 'Electrical engineers, makers', status: 'Future Work' },
    ],
  },
  {
    id: 'water',
    title: 'II. Plasma-Water Interface',
    status: 'Ready to Build',
    statusColor: 'green',
    accentColor: 'green-400',
    workDescription: 'Investigate how plasma-treated water behaves in real systems. Test oxidation mechanisms, desalination methods, and pollutant breakdown pathways. Document kinetics, measure effectiveness, and build reproducible protocols for water treatment applications. Bridge lab chemistry with field deployment.',
    backgrounds: 'Chemistry, environmental science, water systems engineering, analytical methods',
    projects: [
      { title: 'Saltwater Irrigation', lookingFor: 'Chemists, agronomists, field researchers', status: 'Ready to Build', link: '/lab/water/saltwater-irrigation' },
      { title: 'Pollutant Degradation', lookingFor: 'Environmental chemists, analysts', status: 'Future Work' },
      { title: 'Pathogen Removal', lookingFor: 'Microbiologists, water engineers', status: 'Future Work' },
      { title: 'Desalination Systems', lookingFor: 'Engineers, researchers', status: 'Future Work' },
    ],
  },
  {
    id: 'ecosystem',
    title: 'III. Ecosystem Dynamics',
    status: 'Help Shape This',
    statusColor: 'blue',
    accentColor: 'blue-400',
    workDescription: 'Study how organisms and ecosystems respond to plasma-treated environments. Track genetic and epigenetic changes, monitor microbiome shifts, measure stress adaptation and resilience. Build models that predict outcomes across scales—from single organisms to entire ecosystems. Make ecology quantitative and reproducible.',
    backgrounds: 'Ecology, molecular biology, systems biology, bioinformatics, modeling',
    projects: [
      { title: 'Microbiome Response Study', lookingFor: 'Molecular biologists, ecologists', status: 'Future Work' },
      { title: 'Plant Stress Adaptation', lookingFor: 'Botanists, geneticists', status: 'Future Work' },
    ],
  },
];
---

<Layout metadata={metadata}>
  <div class="bg-primary-900 text-white min-h-screen">

    <!-- Hero Section -->
    <section class="relative py-16 md:py-24 bg-[radial-gradient(circle_at_top,#181f3d_0%,#080E21_90%)]">
      <div class="max-w-6xl mx-auto px-4 sm:px-6">

        <!-- Breadcrumb -->
        <nav class="mb-8 text-sm">
          <ol class="flex items-center space-x-2 text-gray-400">
            <li><a href="/pathways" class="hover:text-arc-electric transition">Pathways</a></li>
            <li><span class="text-gray-600">/</span></li>
            <li class="text-white font-medium">Lab</li>
          </ol>
        </nav>

        <div class="text-center">
          <p class="text-sm font-mono text-yellow-400 uppercase tracking-widest mb-4">
            Build & Test
          </p>
          <h1 class="text-5xl md:text-6xl font-mono mb-6 tracking-tight text-white">
            The Lab
          </h1>
          <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">
            The engine for research. We link engineering with ecology by designing plasma systems and open-hardware standards. We pursue non-lethal, non-invasive techniques across three integrated streams.
          </p>
        </div>
      </div>
    </section>

    <!-- Quick Navigation -->
    <section class="bg-gray-900/30 border-b border-gray-800">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 py-6">
        <p class="text-sm text-gray-400 mb-3 text-center">jump to Stream:</p>
        <nav class="flex flex-wrap justify-center gap-4">
          <a href="#physical" class="text-yellow-400 hover:text-yellow-300 transition font-mono hover:underline flex items-center gap-2">
            <Icon name="tabler:bolt" class="w-4 h-4" />
            Physical Systems
          </a>
          <span class="text-gray-600">|</span>
          <a href="#water" class="text-green-400 hover:text-green-300 transition font-mono hover:underline flex items-center gap-2">
            <Icon name="tabler:droplet" class="w-4 h-4" />
            Water Interface
          </a>
          <span class="text-gray-600">|</span>
          <a href="#ecosystem" class="text-blue-400 hover:text-blue-300 transition font-mono hover:underline flex items-center gap-2">
            <Icon name="tabler:tree" class="w-4 h-4" />
            Ecosystems
          </a>
        </nav>
      </div>
    </section>

    <!-- Streams Sections -->
    <section class="bg-primary-900 py-12 md:py-16">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 space-y-16">

        {streams.map((stream) => (
          <div id={stream.id} class="scroll-mt-20">
            {/* Stream Header */}
            <div class="flex items-start justify-between mb-6">
              <h2 class="text-3xl md:text-4xl font-mono text-white">{stream.title}</h2>
              <span
                class:list={[
                  'inline-block text-xs font-semibold px-3 py-1.5 rounded-full whitespace-nowrap ml-4',
                  stream.statusColor === 'green'
                    ? 'bg-green-900/50 text-green-400'
                    : stream.statusColor === 'blue'
                    ? 'bg-blue-900/50 text-blue-400'
                    : stream.statusColor === 'yellow'
                    ? 'bg-yellow-900/50 text-yellow-400'
                    : 'bg-red-900/50 text-red-400',
                ]}
              >
                {stream.status}
              </span>
            </div>

            {/* Work Description */}
            <div class="mb-6 p-6 rounded-xl bg-gray-900/30 backdrop-blur-sm border border-gray-700/50">
              <p class="text-sm font-mono text-living-earth uppercase tracking-wide mb-2">Your work here:</p>
              <p class="text-gray-300 leading-relaxed">{stream.workDescription}</p>
            </div>

            {/* Useful Backgrounds */}
            <div class="mb-8 p-4 rounded-lg bg-gray-800/30 border border-gray-700/30">
              <p class="text-xs font-mono text-arc-electric uppercase tracking-wide mb-1">Useful backgrounds:</p>
              <p class="text-sm text-gray-400">{stream.backgrounds}</p>
            </div>

            {/* Projects Table */}
            <div>
              <h3 class="text-xl font-mono text-white mb-4">Projects in this stream:</h3>
              <div class="overflow-x-auto">
                <table class="w-full border-collapse">
                  <thead>
                    <tr class="border-b-2 border-gray-700">
                      <th class="text-left py-3 px-4 text-sm font-mono text-gray-400 uppercase tracking-wide">Project</th>
                      <th class="text-left py-3 px-4 text-sm font-mono text-gray-400 uppercase tracking-wide">Looking For</th>
                      <th class="text-left py-3 px-4 text-sm font-mono text-gray-400 uppercase tracking-wide">Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    {stream.projects.map((project) => (
                      <tr class="border-b border-gray-800 hover:bg-gray-800/30 transition-colors">
                        <td class="py-4 px-4">
                          {project.link ? (
                            <a href={project.link} class="text-white hover:text-arc-electric transition-colors font-medium">
                              {project.title} →
                            </a>
                          ) : (
                            <span class="text-gray-300">{project.title}</span>
                          )}
                        </td>
                        <td class="py-4 px-4 text-sm text-gray-400">{project.lookingFor}</td>
                        <td class="py-4 px-4">
                          <span
                            class:list={[
                              'inline-block text-xs font-semibold px-2.5 py-1 rounded-full',
                              project.status === 'Ready to Build'
                                ? 'bg-green-900/50 text-green-400'
                                : project.status === 'Active'
                                ? 'bg-blue-900/50 text-blue-400'
                                : 'bg-gray-800/50 text-gray-400',
                            ]}
                          >
                            {project.status}
                          </span>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                </table>
              </div>
            </div>

            {/* Divider between streams */}
            {stream.id !== 'ecosystem' && (
              <div class="mt-16 pt-16 border-t-2 border-gray-800/70">
                <div class="flex items-center justify-center mb-8">
                  <div class="h-px w-16 bg-gradient-to-r from-transparent via-gray-600 to-transparent"></div>
                  <span class="mx-4 text-xs text-gray-600 font-mono uppercase tracking-widest">◆</span>
                  <div class="h-px w-16 bg-gradient-to-r from-transparent via-gray-600 to-transparent"></div>
                </div>
              </div>
            )}
          </div>
        ))}

      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-16 bg-[radial-gradient(circle_at_bottom,#181f3d_0%,#080E21_90%)] border-t border-gray-800">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 text-center">
        <h2 class="text-3xl font-mono text-white mb-4">Ready to Contribute?</h2>
        <p class="text-xl text-gray-300 mb-8">
          Whether you prototype circuits, test plasma systems, document experiments, or design 3D-printable components—your work becomes part of the commons.
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="/get-started"
            class="bg-arc-electric hover:bg-arc-electric/80 hover:scale-105 px-8 py-4 rounded-full font-bold text-white shadow-lg shadow-arc-electric/40 text-lg transition-all"
          >
            Get Started
          </a>
          <a
            href="https://workspace.xbyali.page"
            target="_blank"
            class="bg-living-earth hover:bg-living-earth/90 hover:scale-105 py-4 px-8 text-lg rounded-full font-bold shadow-lg shadow-living-earth/40 transition-all text-gray-900"
          >
            Access Workspace
          </a>
        </div>
      </div>
    </section>

  </div>
</Layout>
