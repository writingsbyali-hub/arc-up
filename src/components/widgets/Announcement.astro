---
export interface Props {
  id?: string;
}

const { id = 'announcement' } = Astro.props;
---

<div
  {...id ? { id } : {}}
  class="bg-primary-900 border-b border-arc-electric/30 backdrop-blur-sm flex justify-center items-center px-3 py-3 md:py-2.5 cursor-pointer hover:bg-primary-900/80 transition-all group"
  role="button"
  tabindex="0"
  aria-label="Take the 2-minute tour to learn about arc^"
>
  <span
    class="bg-arc-electric/20 border border-arc-electric/40 text-arc-electric font-mono font-bold px-2 py-0.5 text-xs mr-2 inline-block rounded uppercase"
    >NEW TO ARC^?</span
  >
  <span class="text-white font-mono text-sm group-hover:text-arc-electric transition-colors"
    >Take the 2-minute tour â†’</span
  >
</div>

<script>
  function initAnnouncement() {
    const announcement = document.getElementById('announcement');
    const tourButton = document.getElementById('tour-button');

    if (!announcement || !tourButton) return;

    // Make announcement clickable to open tour
    const openTour = () => {
      tourButton.click();
    };

    announcement.addEventListener('click', openTour);
    announcement.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        openTour();
      }
    });
  }

  document.addEventListener('DOMContentLoaded', initAnnouncement);
  document.addEventListener('astro:after-swap', initAnnouncement);
</script>
