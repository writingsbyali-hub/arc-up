---
import type { CallToAction, Widget } from '~/types';

interface Props extends Widget {
  title?: string;
  subtitle?: string;
  tagline?: string;
  callToAction?: CallToAction;
  actions?: Array<{
    text: string;
    href: string;
    variant?: 'primary' | 'secondary';
  }>;
  pillar?: 'lab' | 'framework' | 'commons' | 'neutral';
  variant?: 'standard' | 'compact';
}

const {
  title,
  subtitle,
  tagline,
  actions = [],
  pillar = 'neutral',
  variant = 'standard',
  id,
  classes = {},
} = Astro.props;

// Pillar-specific configurations
const pillarConfig = {
  lab: {
    primaryBtn: 'bg-yellow-400 hover:bg-yellow-300 text-gray-900 shadow-lg shadow-yellow-400/50',
    secondaryBtn: 'bg-gray-800 hover:bg-gray-700 text-white',
    cardBg: 'bg-gradient-to-br from-yellow-400/10 to-[#131A33]/50',
  },
  framework: {
    primaryBtn: 'bg-living-earth hover:bg-living-earth/90 text-gray-900 shadow-lg shadow-living-earth/50',
    secondaryBtn: 'bg-gray-800 hover:bg-gray-700 text-white',
    cardBg: 'bg-gradient-to-br from-living-earth/10 to-[#131A33]/50',
  },
  commons: {
    primaryBtn: 'bg-blue-400 hover:bg-blue-300 text-gray-900 shadow-lg shadow-blue-400/50',
    secondaryBtn: 'bg-gray-800 hover:bg-gray-700 text-white',
    cardBg: 'bg-gradient-to-br from-blue-400/10 to-[#131A33]/50',
  },
  neutral: {
    primaryBtn: 'bg-arc-electric hover:bg-arc-electric/90 text-white shadow-lg shadow-arc-electric/50',
    secondaryBtn: 'bg-gray-800 hover:bg-gray-700 text-white',
    cardBg: 'bg-[#131A33]/50',
  },
};

const config = pillarConfig[pillar];

// Variant-specific configurations
const sectionPadding = variant === 'compact' ? 'py-8 md:py-12' : 'py-12 md:py-16';
const containerMaxWidth = variant === 'compact' ? 'max-w-3xl' : 'max-w-4xl';
const cardPadding = variant === 'compact' ? 'p-6' : 'p-8 md:p-10';
const cardRounded = variant === 'compact' ? 'rounded-xl' : 'rounded-2xl';
const cardShadow = variant === 'compact' ? '' : 'shadow-2xl';
const cardBg = variant === 'compact' ? 'bg-gray-900/30' : config.cardBg;
---

<section class={sectionPadding} id={id}>
  <div class={`${containerMaxWidth} mx-auto px-4 sm:px-6 ${classes?.container ?? ''}`}>
    <div class={`${cardBg} backdrop-blur-sm ${cardRounded} ${cardShadow} border border-gray-700/50 ${cardPadding} text-center`}>
      {tagline && (
        <p class="text-sm font-mono text-arc-electric uppercase tracking-widest mb-4">{tagline}</p>
      )}
      {title && (
        <h2 class="text-2xl md:text-3xl font-mono font-bold text-white mb-4">
          {title}
        </h2>
      )}
      {subtitle && (
        <p class="text-base md:text-lg text-gray-300 mb-8 max-w-2xl mx-auto">
          {subtitle}
        </p>
      )}
      {actions && actions.length > 0 && (
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          {actions.map((action) => (
            <a
              href={action.href}
              class={`inline-flex items-center gap-2 px-6 md:px-8 py-3 md:py-4 rounded-lg font-mono font-bold transition-all duration-300 hover:scale-[1.05] group ${
                action.variant === 'secondary' ? config.secondaryBtn : config.primaryBtn
              }`}
            >
              <span>{action.text}</span>
              <svg class="w-5 h-5 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </a>
          ))}
        </div>
      )}
    </div>
  </div>
</section>
